modules:

  macro:

    - key: ec2u-phds
      title: EC2U PhD Agreements Tool
      description: EC2U AI-based Confluence macro supporting drafting of cotutelle PhD
        agreements.

      resource: main
      render: native
      layout: bodied

      resolver:

        function: resolver

      config:

        title: EC2U PhD Agreements Tool
        resource: macro-config
        render: native
        viewportSize: max
        openOnInsert: false

  function:

    - key: resolver
      handler: server/ports/index.handler

resources:

  - key: main
    path: src/client/body.tsx

  - key: macro-config
    path: src/client/tool.tsx

app:
  id: ari:cloud:ecosystem::app/68e73326-bb04-4df2-a14c-382ba3abbe2b
  runtime:
    name: nodejs22.x

permissions:

  scopes:
    - read:confluence-content.all
    - write:confluence-file
    - read:attachment:confluence
    - delete:attachment:confluence

  external:
    fetch:
      backend:
        - remote: gemini

remotes:
  - key: gemini
    baseUrl: https://generativelanguage.googleapis.com
    operations:
      - fetch
